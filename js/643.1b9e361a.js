"use strict";(self["webpackChunkvue_3_2"]=self["webpackChunkvue_3_2"]||[]).push([[643],{5643:function(e,l,a){a.r(l),a.d(l,{default:function(){return z}});var t=a(3396),u=a(4870),o=a(7139),n=a(8859);const i=e=>(0,n.Z)({url:"users",method:"get",params:e}),d=(e,l)=>(0,n.Z)({method:"put",url:`users/${e}/state/${l}`}),r=e=>(0,n.Z)({method:"post",url:"users",data:e}),s=e=>(0,n.Z)({method:"put",url:`users/${e.id}`,data:e}),m=e=>(0,n.Z)({method:"delete",url:`users/${e}`}),p=[{prop:"id",label:"ID",width:"150"},{prop:"username",label:"用户名",width:"160"},{prop:"mobile",label:"电话",width:"160"},{prop:"email",label:"邮箱",width:"160"},{prop:"role_name",label:"角色名字",width:"160"},{prop:"create_time",label:"创建时间",width:"160"},{prop:"mg_state",label:"状态",width:"160"},{prop:"operations",label:"操作"}];var c=a(5574),w=a(1897);const g={class:"dialog-footer"},f=(0,t.Uk)("取消"),h=(0,t.Uk)("确认");var v={props:{changeTitle:{type:String,default:"",required:!0},dialogTableValue:{type:Object,default:()=>{}}},emits:["update:modelValue","initGetUsers"],setup(e,{emit:l}){const a=e,o=(0,u.iH)({username:"",password:"",email:"",mobile:""});(0,t.YP)(a.dialogTableValue,(()=>{o.value=a.dialogTableValue,console.log(a.dialogTableValue)}),{deep:!0,immediate:!0});const n=()=>{l("update:modelValue",!1)},i=async()=>{"添加用户"===a.changeTitle?(await r(o.value),(0,c.z8)({showClose:!0,message:"用户添加成功",type:"success"})):(await s(o.value),(0,c.z8)({showClose:!0,message:"用户编辑成功",type:"success"})),l("initGetUsers"),n()};return(l,a)=>{const u=(0,t.up)("el-input"),d=(0,t.up)("el-form-item"),r=(0,t.up)("el-button"),s=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(s,{"model-value":l.dialogVisible,title:e.changeTitle,width:"40%","before-close":n,center:"true"},{footer:(0,t.w5)((()=>[(0,t._)("span",g,[(0,t.Wm)(r,{onClick:n},{default:(0,t.w5)((()=>[f])),_:1}),(0,t.Wm)(r,{type:"primary",onClick:i},{default:(0,t.w5)((()=>[h])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"用户"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:o.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),"添加用户"===e.changeTitle?((0,t.wg)(),(0,t.j4)(d,{key:0,label:"密码"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:o.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(d,{label:"邮箱"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:o.value.email,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"电话"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:o.value.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.mobile=e),placeholder:"请输入电话号"},null,8,["modelValue"])])),_:1})])),_:1},8,["model-value","title"])}}};const _=v;var b=_,y=a(8916);const V=(0,t.Uk)("查询"),W=(0,t.Uk)("添加用户"),U={class:"elPage"};var k={setup(e){const l=(0,u.qj)({query:"",pagenum:1,pagesize:7}),a=(0,u.iH)([]),n=(0,u.iH)(0),r=async()=>{await i(l).then((e=>{console.log(e),a.value=e.users,n.value=e.total}))};r();const s=e=>{l.pagesize=1,l.pagesize=e,r()},g=e=>{l.pagenum=e,r()},f=async e=>{await d(e.id,e.mg_state),(0,c.z8)({showClose:!0,message:"用户状态修改成功",type:"success"})},h=(0,u.iH)(!1),v=(0,u.iH)(""),_=(0,u.iH)({}),k=e=>{(0,y.F)(e)?(v.value="添加用户",_.value={}):(v.value="编辑用户",_.value=JSON.parse(JSON.stringify(e))),h.value=!0},C=e=>{w.T.confirm("确定要删除这条用户数据吗?","警告",{confirmButtonText:"确定",cancelButtonText:"关闭",type:"warning",center:!0}).then((async()=>{await m(e.id),await r(),(0,c.z8)({type:"success",message:"删除成功"})})).catch((()=>{(0,c.z8)({type:"info",message:"取消删除"})}))};return(e,i)=>{const d=(0,t.up)("el-input"),m=(0,t.up)("el-form-item"),c=(0,t.up)("el-button"),w=(0,t.up)("el-alert"),y=(0,t.up)("el-form"),T=(0,t.up)("el-card"),z=(0,t.up)("el-col"),S=(0,t.up)("el-row"),H=(0,t.up)("el-switch"),q=(0,t.up)("el-table-column"),j=(0,t.up)("el-table"),x=(0,t.up)("el-pagination");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(S,{gutter:12},{default:(0,t.w5)((()=>[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(T,{"body-style":{height:"72px"},shadow:"hover",class:"searchForm"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{inline:!0,model:(0,u.SU)(l),class:"demo-form-inline"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"用户名"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{modelValue:(0,u.SU)(l).query,"onUpdate:modelValue":i[0]||(i[0]=e=>(0,u.SU)(l).query=e),placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{type:"primary",onClick:r},{default:(0,t.w5)((()=>[V])),_:1})])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{type:"primary",onClick:i[1]||(i[1]=e=>k())},{default:(0,t.w5)((()=>[W])),_:1})])),_:1}),(0,t.Wm)(w,{title:"表中数据为重要数据，请谨慎操作",type:"warning",center:""})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(S,{gutter:12,class:"el-card__body"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(T,{shadow:"hover"},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{data:a.value,stripe:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,u.SU)(p),((l,a)=>((0,t.wg)(),(0,t.j4)(q,{prop:l.prop,label:l.label,width:l.width},(0,t.Nv)({_:2},["create_time"===l.prop?{name:"default",fn:(0,t.w5)((({row:l})=>[(0,t.Uk)((0,o.zw)(e.$filter.filterTime(l.create_time)),1)]))}:"mg_state"===l.prop?{name:"default",fn:(0,t.w5)((({row:e})=>[(0,t.Wm)(H,{modelValue:e.mg_state,"onUpdate:modelValue":l=>e.mg_state=l,class:"ml-2","inline-prompt":"",width:"45","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"正常","inactive-text":"禁用",onChange:l=>f(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]))}:"operations"===l.prop?{name:"default",fn:(0,t.w5)((({row:e})=>[(0,t.Wm)(c,{size:"small",onClick:l=>k(e)},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑")])),_:2},1032,["onClick"]),(0,t.Wm)(c,{size:"small",type:"danger",onClick:l=>C(e)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])]))}:void 0]),1032,["prop","label","width"])))),256))])),_:1},8,["data"])])),_:1})])),_:1})])),_:1}),(0,t._)("div",U,[(0,t.Wm)(x,{currentPage:(0,u.SU)(l).pagenum,"onUpdate:currentPage":i[2]||(i[2]=e=>(0,u.SU)(l).pagenum=e),"page-size":(0,u.SU)(l).pagesize,background:"",layout:"prev, pager, next",total:n.value,onSizeChange:s,onCurrentChange:g},null,8,["currentPage","page-size","total"])]),h.value?((0,t.wg)(),(0,t.j4)((0,u.SU)(b),{key:0,modelValue:h.value,"onUpdate:modelValue":i[3]||(i[3]=e=>h.value=e),changeTitle:v.value,onInitGetUsers:r,dialogTableValue:_.value},null,8,["modelValue","changeTitle","dialogTableValue"])):(0,t.kq)("",!0)],64)}}},C=a(89);const T=(0,C.Z)(k,[["__scopeId","data-v-39658f7e"]]);var z=T}}]);
//# sourceMappingURL=643.1b9e361a.js.map